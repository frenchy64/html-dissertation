image: alpine/edge
oauth: pages.sr.ht/PAGES:RW
secrets:
  - 4fb99124-4e5f-4427-8796-3ccc0d953621
packages:
- hut
- make
- texmf-dist
- texlive
- luatex
sources:
  - git@git.sr.ht:~ambrosebs/html-dissertation
environment:
  site: test-sh.ambrosebs.com
  repo: html-dissertation
tasks:
- package: |
    cd $repo
    make clean
    make html-all
    ./tar-site.sh
- upload: |
    hut pages publish -d $site $repo/site.tar.gz
